language: java
sudo: false
install: true

before_install:
  - wget http://nexus.saas.hand-china.com/content/repositories/rdc/com/oracle/ojdbc7/12.1.0.2/ojdbc7-12.1.0.2.jar
  - mvn install:install-file -DgroupId=com.oracle -DartifactId=ojdbc7 -Dversion=12.1.0.2 -Dpackaging=jar -Dfile=ojdbc7-12.1.0.2.jar
  - wget https://artifacts.alfresco.com/nexus/content/repositories/public/com/ibm/db2/jcc/db2jcc4/10.1/db2jcc4-10.1.jar
  - mvn install:install-file -DgroupId=com.ibm.db2.jcc -DartifactId=db2jcc4 -Dversion=10.1 -Dpackaging=jar -Dfile=db2jcc4-10.1.jar

addons:
  sonarcloud:
    organization: "wz2cool-github" # the key of the org you chose at step #3
    token:
      secure: "Wuguj3RCVslz25kQJcpjgHwI3DjWwtN6iaMepABg3mpGedXr0FqlW5N3mwNY92iT5xJnXuCgF8ScOCpaI+i7zJRC45kgRfE8QTSc5o9BdXk2Y8Rtt/XfX+OXkfd1mVN8fFV1vp7vgUqkKHW6cTOCEfbjQXtJtiaCDvpZocpiVUAHO/mfzQqPIenqnQE4L3fy6JtyVXLXsyZFt7dMevN/yv5nCvN5fWec4/clq17qV/+Dry3LKrDokFIuR9U0qqgg40SsxYQC/N2yPP2xSzMeII3o+vPvULK43gmtptpkolIEf1AtaXMhV/O9QZcINiqqsyCYVRsqrb4GCit6Rk9unRYlXHbr4blc8cb81OVSa503/t+SFQx9ptbg6mFIKxJZarkjubAYo8cUp1I/jhSxrh9a14BNtiwV/+6eugH3jJDubbT+V/ORyhqoQL1eSG8BWYeVE1Cvkgb10GJoq5/QTj/82Encpv5mqBFBDWTk7BCrXFeUsZJr5LCUXagoVjKiRVqd+B7Q9N4I01IieaLPe/xZemLCwPQAW/lG7Wx4xMxQnX9WOb7uWNaTCqHfvvT3XJXXW2/YagK0WMbWuqhUcQmWcJqR+yQqlWuvBJtslh4yQRlaV8GgeWNdyKbQuVLeq9bloG7qMOOAFos7VyzF7mZaKPirMA0O8ytxFTNU5fs=" # encrypted value of your token
script:
  # the following command line builds the project, runs the tests with coverage and then execute the SonarCloud analysis
  - mvn -q clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar

after_success:
  - mvn -q clean test jacoco:report coveralls:report

cache:
  directories:
    - '$HOME/.m2/repository'
    - '$HOME/.sonar/cache'

jdk:
  - openjdk8
