language: java
sudo: false
install: true

before_install:
  - wget http://nexus.saas.hand-china.com/content/repositories/rdc/com/oracle/ojdbc7/12.1.0.2/ojdbc7-12.1.0.2.jar
  - mvn install:install-file -DgroupId=com.oracle -DartifactId=ojdbc7 -Dversion=12.1.0.2 -Dpackaging=jar -Dfile=ojdbc7-12.1.0.2.jar
  - wget https://artifacts.alfresco.com/nexus/content/repositories/public/com/ibm/db2/jcc/db2jcc4/10.1/db2jcc4-10.1.jar
  - mvn install:install-file -DgroupId=com.ibm.db2.jcc -DartifactId=db2jcc4 -Dversion=10.1 -Dpackaging=jar -Dfile=db2jcc4-10.1.jar

addons:
  sonarcloud:
    organization: "wz2cool-github"
    token:
      secure: "boaTIIJJH+XLJxFPleUxpi0msGMtFe+XDXP8h8v6Rhj0oKHoBE9sBZtU5eIlnnCdbNZX2/cbY5dno8Z68WXIKor+8Zj2UEg1tlO3w6c7+clhNBMU1DXRvMdKa+AI2E1LN43R+8w8A/mUPjI/50zenq5xU4ZL2QBHUD5le441byEa/NaabSkGjaQclBFbx5NUDfsF5+I1A6JVMTyP0vMTzN5ZVo/SqMTZk+LUCVN1Gem/FJ7L5MhhtfyPxTUVFwg5tA2lpok18czuqzZ8dlhuoVo8Mj5e/jm7n3HFArCyhd4g7VoP4VB5UlKIKMlv+JNcOM0IJKH7YVufNWsKvGL3aNT94KPm7Es2tBejcuKmO8314RkQs+J8SR5IvThJ6STNY3bIAdXwCUV5/3xYx7SEJNdv1Hr4SeNJwR+KdgzaXuztri/bBpx3HiPj1jTYmKiHOiJKfhOzW7yYdLNxvjpAYFTSOBAXdAlPjCDoa83lFFRyrAo+9j2mfLk/w5CB6cfyK2pVNgECet3m05eXZbDBEHLz1T15fwdnPxbD0WbxuLxhH1VD20wtFWyWBTQGChJJbbUpVb29JHz0Le3fNfgwlzDu+R7eSABfjCaQnBMTnZLjnSJDBvgsn5doM9LghdqcSO4K8hGv6vFBQOuSfsK4Bcji5956DeXBNUeagBmzMR4="

script:
  # the following command line builds the project, runs the tests with coverage and then execute the SonarCloud analysis
  - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar

after_success:
  - mvn -q clean test jacoco:report coveralls:report

cache:
  directories:
    - '$HOME/.m2/repository'
    - '$HOME/.sonar/cache'


jdk:
  - openjdk8
