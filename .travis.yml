language: java
sudo: false
install: true

before_install:
  - wget http://nexus.saas.hand-china.com/content/repositories/rdc/com/oracle/ojdbc7/12.1.0.2/ojdbc7-12.1.0.2.jar
  - mvn install:install-file -DgroupId=com.oracle -DartifactId=ojdbc7 -Dversion=12.1.0.2 -Dpackaging=jar -Dfile=ojdbc7-12.1.0.2.jar
  - wget https://artifacts.alfresco.com/nexus/content/repositories/public/com/ibm/db2/jcc/db2jcc4/10.1/db2jcc4-10.1.jar
  - mvn install:install-file -DgroupId=com.ibm.db2.jcc -DartifactId=db2jcc4 -Dversion=10.1 -Dpackaging=jar -Dfile=db2jcc4-10.1.jar

addons:
  sonarcloud:
    organization: "wz2cool-github"
    token:
      secure: "rDZfi1y0evFFjKr1+FiumWzqFG8VE7LcL/xJUeUPN4IgbTVZZKZEdrMDgEiuy3RZ9hLyEM+ASw+I7pzqh7UKhqRH8hlpmbc77q/SA6nGKAGSQqBGpoCTseNo+Bdh2IGf0dyhlf8xZ0ibvk/ZBd8BIk9ZVQGdehw4MSv3DUWa3KmdCYnlQupIkcsRjQJCCSAgmLNMQXS/iV6mzY9pIfTvm/Y2KMMrP/lRGppUrSM+E8npTOhw3Y6i4wdudDF6Kk8fp/BVWiOm8UBPcSBgbt0uw8VTEyywoSJCNksyqbp79Nzh4fwfcho1dky2Sf9UpxsqDRq7l/j0LCT4iZ01kv/z0CBdTGrUzXF0ym4v5DnvKq2txX+gpLahjM8VqBohmL6pAox+/O0vs26HzROEaQQwyUaoZ2TQXvmSx1sqfr1rV0BCkCIqjfYq5a23WxNnQhPc/EtGCQune9lzFzNBgffiZjxnNabnBNQvJLD4OEQKl9pUrNRpn6Rx6sYxynSEAElgdfqs4+g/ZNxy9WSATuWLfaCVMF1AfcpBlctYTP0XQwYnvz9qGFHnvIQRk1xLWMl3aasFc+np99iPdbDOUnKWzX6e9A8vwfn+4ibc/33sJkRF8tp6C103By3N6fZ3UJAcAxglD6Pp4apmH289A3FkgGSmwiOOwBnl5gz5qTslH84="

script:
  # the following command line builds the project, runs the tests with coverage and then execute the SonarCloud analysis
  - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar

  travis encrypt 55ef1535d9c5183a2b75415c04069df49b697e84

after_success:
  - mvn -q clean test jacoco:report coveralls:report

cache:
  directories:
    - '$HOME/.m2/repository'
    - '$HOME/.sonar/cache'


jdk:
  - openjdk8
